## The Database

We use 2 main tools to manage the database

- `dbmate` For schema migrations
- `cornucopia` for generating rust code from `sql` files.

## Database Schemas

Run `just -f crates/db/Justfile db-diagram` to refresh the diagrams.

<!-- schemas-start -->
### `iam`

Identity, access, roles, teams, and memberships.

```mermaid
%% generated by just db-diagram
```

### `integrations`

External integrations, connections, and OpenAPI specs.

```mermaid
%% generated by just db-diagram
```

### `llm`

Chat conversations, messages, and runtime limits.

```mermaid
%% generated by just db-diagram
```

### `prompting`

Prompts, categories, and project metadata for authoring.

```mermaid
%% generated by just db-diagram
```

### `automation`

Automation triggers and execution history.

```mermaid
%% generated by just db-diagram
```

### `rag`

Datasets, documents, chunks, and retrieval metadata.

```mermaid
%% generated by just db-diagram
```

### `model_registry`

Model providers, models, and capabilities.

```mermaid
%% generated by just db-diagram
```

### `storage`

Stored binary objects and references.

```mermaid
%% generated by just db-diagram
```

### `ops`

Operational data like audit trails and translations.

```mermaid
%% generated by just db-diagram
```

### `public`

Legacy schema for extensions, helpers, and compatibility objects.

```mermaid
%% generated by just db-diagram
```
<!-- schemas-end -->

